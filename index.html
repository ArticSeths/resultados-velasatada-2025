<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velasatada del A침o 2025 - Star Citizen Org</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&display=swap');
        
        body { 
            font-family: 'Rajdhani', sans-serif; 
            background-color: #0B0E17;
            background-image: 
                radial-gradient(circle at 50% 0%, #1a2c4e 0%, transparent 50%),
                radial-gradient(circle at 0% 100%, #1e1b2e 0%, transparent 50%);
        }
        
        h1, h2, h3, .sc-font { font-family: 'Orbitron', sans-serif; }

        .sc-glass {
            background: rgba(16, 24, 39, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(56, 189, 248, 0.2);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        .sc-card {
            background: linear-gradient(180deg, rgba(30, 41, 59, 0.6) 0%, rgba(15, 23, 42, 0.8) 100%);
            border-left: 3px solid #38bdf8;
            transition: all 0.3s ease;
        }
        
        .sc-card:hover {
            border-left-color: #fbbf24;
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.2);
            transform: translateX(4px);
        }

        .bracket-line {
            position: absolute;
            background-color: #475569;
            z-index: -1;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="text-slate-100 min-h-screen p-4 md:p-6 overflow-x-hidden">

    <!-- Header -->
    <header class="max-w-7xl mx-auto mb-10 text-center relative">
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-3/4 h-32 bg-cyan-500/10 blur-[100px] rounded-full pointer-events-none"></div>
        
        <div class="inline-block border border-cyan-500/30 bg-slate-900/50 px-4 py-1 rounded-full text-cyan-400 text-sm font-bold tracking-widest mb-4 uppercase">
            Star Citizen Organization Event
        </div>
        
        <h1 class="text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-white to-amber-400 mb-2 filter drop-shadow-[0_0_10px_rgba(34,211,238,0.5)]">
            VELASATADA 2025
        </h1>
        <p class="text-slate-400 text-lg md:text-xl font-light tracking-wide">
            Torneo Clasificatorio & Sistema de Apuestas
        </p>
    </header>

    <main class="max-w-[1600px] mx-auto grid grid-cols-1 xl:grid-cols-4 gap-8">
        
        <!-- Columna Izquierda: Leaderboard (Econom칤a) -->
        <section class="xl:col-span-1 order-2 xl:order-1">
            <div class="sc-glass rounded-xl p-6 sticky top-8">
                <h2 class="text-xl font-bold mb-6 flex items-center gap-2 text-amber-400 border-b border-white/10 pb-4">
                    <i class="fas fa-chart-line"></i> Ranking Financiero
                </h2>
                <div id="leaderboard" class="space-y-3">
                    <!-- Leaderboard JS -->
                </div>
            </div>
        </section>

        <!-- Columna Derecha: Torneo y Combates -->
        <section class="xl:col-span-3 order-1 xl:order-2 space-y-8">
            
            <!-- Visualizaci칩n del Bracket -->
            <div class="sc-glass rounded-xl p-6 overflow-x-auto">
                <h2 class="text-xl font-bold mb-6 flex items-center gap-2 text-cyan-400">
                    <i class="fas fa-sitemap"></i> Estructura del Torneo
                </h2>
                
                <!-- Grid de Fases -->
                <div class="min-w-[800px] grid grid-cols-4 gap-4 text-center mb-4">
                    <div class="text-slate-500 text-xs uppercase tracking-widest font-bold">Clasificatorias</div>
                    <div class="text-slate-500 text-xs uppercase tracking-widest font-bold">Cuartos / Eliminatoria</div>
                    <div class="text-slate-500 text-xs uppercase tracking-widest font-bold">Semifinales</div>
                    <div class="text-amber-500/80 text-xs uppercase tracking-widest font-bold shadow-amber-500/50">Finales</div>
                </div>

                <div class="min-w-[800px] grid grid-cols-4 gap-6 relative" id="bracket-view">
                    <!-- Se llena con JS agrupando las peleas -->
                </div>
            </div>

            <!-- Lista Detallada de Apuestas -->
            <div>
                <h2 class="text-xl font-bold mb-4 flex items-center gap-2 text-slate-300">
                    <i class="fas fa-list-ul"></i> Registro de Combates y Apuestas
                </h2>
                <div id="fights-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Peleas se llenan con JS -->
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- 1. DATOS DE ENTRADA (Ordenados Cronol칩gicamente) ---
        const rawFights = [
            // --- PRELIMINARES / CLASIFICATORIAS TEMPRANAS ---
            { title: "Pichon vs Ububu", winner: "Pichon", phase: "Preliminar A", bets: [
                { user: "WhodouVoodoo", amount: "50k", on: "Ububu" }, { user: "Alfo", amount: "100k", on: "Pichon" }, { user: "Jpthekit", amount: "200k", on: "Ububu" }, { user: "Eric_LOM", amount: "20k", on: "Pichon" }, { user: "Facolnest", amount: "200k", on: "Pichon" }, { user: "Ladislao", amount: "500k", on: "Ububu" }, { user: "Nijhitivi", amount: "200k", on: "Pichon" } ] },
            
            { title: "Zripht vs Ladislao", winner: "Ladislao", phase: "Preliminar B", bets: [
                { user: "WhodouVoodoo", amount: "50k", on: "Ladislao" }, { user: "Pichon9898", amount: "50k", on: "Zripht" }, { user: "Kuga2207", amount: "20k", on: "Zripht" }, { user: "Jpthekit", amount: "50k", on: "Ladislao" }, { user: "Nijhitivi", amount: "200k", on: "Ladislao" }, { user: "Facolnest", amount: "300k", on: "Zripht" }, { user: "Eric_LOM", amount: "50k", on: "Ladislao" } ] },
            
            { title: "Kuga vs Alfo", winner: "Alfo", phase: "Preliminar C", bets: [
                { user: "Zripht", amount: "400k", on: "Alfo" }, { user: "Ladislao", amount: "500k", on: "Alfo" }, { user: "WhodouVoodoo", amount: "100k", on: "Alfo" }, { user: "Nijhitivi", amount: "400k", on: "Kuga" }, { user: "Facolnest", amount: "200k", on: "Kuga" }, { user: "Eric_LOM", amount: "50k", on: "Kuga" }, { user: "Jpthekit", amount: "50k", on: "Kuga" }, { user: "Pichon9898", amount: "100k", on: "Alfo" } ] },
            
            // Ladislao viene de ganar la Preliminar B
            { title: "JPtheKit vs Ladislao", winner: "JPtheKit", phase: "Eliminatoria 1", bets: [
                { user: "Zripht", amount: "500k", on: "Ladislao" }, { user: "WhodouVoodoo", amount: "100k", on: "JPtheKit" }, { user: "Pichon9898", amount: "200k", on: "Ladislao" }, { user: "Nijhitivi", amount: "200k", on: "Ladislao" }, { user: "Facolnest", amount: "200k", on: "Ladislao" }, { user: "Kuga2207", amount: "20k", on: "JPtheKit" }, { user: "Alfo", amount: "200k", on: "JPtheKit" }, { user: "Eric_LOM", amount: "50k", on: "JPtheKit" } ] },
            
            // Alfo viene de ganar la Preliminar C
            { title: "Whodo vs Alfo", winner: "Whodo", phase: "Eliminatoria 2", bets: [
                { user: "Pichon9898", amount: "200k", on: "Alfo" }, { user: "Facolnest", amount: "200k", on: "Whodo" }, { user: "Ladislao", amount: "69k", on: "Whodo" }, { user: "Nijhitivi", amount: "500k", on: "Whodo" }, { user: "Eric_LOM", amount: "50k", on: "Whodo" }, { user: "Kuga2207", amount: "40k", on: "Alfo" }, { user: "Jpthekit", amount: "50k", on: "Alfo" } ] },
            
            { title: "IBM vs Ciro", winner: "Ciro", phase: "Preliminar D", bets: [
                { user: "Facolnest", amount: "200k", on: "Ciro" }, { user: "Alfo", amount: "300k", on: "Ciro" }, { user: "WhodouVoodoo", amount: "100k", on: "IBM" }, { user: "Pichon9898", amount: "500k", on: "IBM" }, { user: "Nijhitivi", amount: "300k", on: "IBM" }, { user: "Kuga2207", amount: "80k", on: "IBM" }, { user: "Ladislao", amount: "100k", on: "IBM" }, { user: "Eric_LOM", amount: "50k", on: "IBM" } ] },
            
            { title: "Roi vs Nijhitivi", winner: "Nijhitivi", phase: "Preliminar E", bets: [
                { user: "WhodouVoodoo", amount: "100k", on: "Nijhitivi" }, { user: "Pichon9898", amount: "1M", on: "Nijhitivi" }, { user: "Kuga2207", amount: "200k", on: "Nijhitivi" }, { user: "Facolnest", amount: "300k", on: "Roi" }, { user: "Eric_LOM", amount: "50k", on: "Nijhitivi" }, { user: "Alfo", amount: "500k", on: "Roi" }, { user: "Ladislao", amount: "200k", on: "Roi" } ] },
            
            // --- CUARTOS DE FINAL ---
            // Pichon viene de ganar Preliminar A
            { title: "Pichon vs EricTheKit", winner: "EricTheKit", phase: "Cuartos A", bets: [
                { user: "Facolnest", amount: "300k", on: "Pichon" }, { user: "Alfo", amount: "400k", on: "EricTheKit" }, { user: "Kuga2207", amount: "50k", on: "Pichon" }, { user: "WhodouVoodoo", amount: "50k", on: "EricTheKit" } ] },
            
            // JP viene de ganar Eliminatoria 1
            { title: "JPTheKit vs Facolnest", winner: "JPTheKit", phase: "Cuartos B", bets: [
                { user: "WhodouVoodoo", amount: "200k", on: "JPTheKit" }, { user: "Ladislao", amount: "2M", on: "Facolnest" }, { user: "Pichon9898", amount: "1M", on: "Facolnest" }, { user: "Eric_LOM", amount: "100k", on: "JPTheKit" }, { user: "Kuga2207", amount: "200k", on: "JPTheKit" }, { user: "Zripht", amount: "3M", on: "JPTheKit" }, { user: "Nijhitivi", amount: "500k", on: "JPTheKit" } ] },
            
            // Nijhitivi viene de ganar Preliminar E
            { title: "Nijhitivi vs Alejandro", winner: "Nijhitivi", phase: "Cuartos C", bets: [
                { user: "WhodouVoodoo", amount: "100k", on: "Nijhitivi" }, { user: "Kuga2207", amount: "200k", on: "Nijhitivi" }, { user: "Pichon9898", amount: "2M", on: "Alejandro" }, { user: "Facolnest", amount: "500k", on: "Nijhitivi" }, { user: "Ladislao", amount: "200k", on: "Nijhitivi" }, { user: "Alfo", amount: "500k", on: "Nijhitivi" }, { user: "Jpthekit", amount: "50k", on: "Nijhitivi" }, { user: "Eric_LOM", amount: "100k", on: "Nijhitivi" } ] },
            
            // Whodo (Eliminatoria 2) vs Ciro (Preliminar D)
            { title: "Whodo vs Ciros", winner: "Ciros", phase: "Cuartos D", bets: [
                { user: "Facolnest", amount: "500k", on: "Whodo" }, { user: "Ladislao", amount: "500k", on: "Ciros" }, { user: "Pichon9898", amount: "3M", on: "Whodo" }, { user: "Eric_LOM", amount: "100k", on: "Whodo" }, { user: "Kuga2207", amount: "200k", on: "Whodo" }, { user: "Jpthekit", amount: "100k", on: "Whodo" }, { user: "Nijhitivi", amount: "600k", on: "Whodo" } ] },
            
            // --- SEMIFINALES ---
            // Eric (Cuartos A) vs JP (Cuartos B)
            { title: "EricTheKit vs JPTheKit", winner: "JPTheKit", phase: "Semifinal 1", bets: [
                { user: "Pichon9898", amount: "10M", on: "JPTheKit" }, { user: "Nijhitivi", amount: "1M", on: "JPTheKit" }, { user: "Perdi1412", amount: "500k", on: "EricTheKit" }, { user: "WhodouVoodoo", amount: "500k", on: "EricTheKit" }, { user: "Kuga2207", amount: "500k", on: "JPTheKit" }, { user: "Curtidor", amount: "1M", on: "EricTheKit" }, { user: "Facolnest", amount: "1M", on: "JPTheKit" }, { user: "Ladislao", amount: "750k", on: "EricTheKit" }, { user: "Zripht", amount: "500k", on: "EricTheKit" } ] },
            
            // Nijhitivi (Cuartos C) vs Ciro (Cuartos D)
            { title: "Nijhitivi vs Ciros", winner: "Nijhitivi", phase: "Semifinal 2", bets: [
                { user: "Facolnest", amount: "1M", on: "Ciros" }, { user: "WhodouVoodoo", amount: "500k", on: "Nijhitivi" }, { user: "Pichon9898", amount: "10M", on: "Ciros" }, { user: "Kuga2207", amount: "500k", on: "Nijhitivi" }, { user: "Eric_LOM", amount: "500k", on: "Ciros" }, { user: "Alfo", amount: "1M", on: "Nijhitivi" }, { user: "Zripht", amount: "500k", on: "Nijhitivi" }, { user: "Ladislao", amount: "500k", on: "Nijhitivi" } ] },
            
            // --- FINALES ---
            // 3er Puesto (Perdedores Semis: Eric vs Ciro)
            { title: "ErictheKit vs Ciros", winner: "Ciros", phase: "3er Puesto", bets: [
                { user: "Nijhitivi", amount: "1M", on: "Ciros" }, { user: "WhodouVoodoo", amount: "1M", on: "Ciros" }, { user: "Pichon9898", amount: "10M", on: "Ciros" }, { user: "Zripht", amount: "2M", on: "ErictheKit" }, { user: "Ladislao", amount: "1M", on: "ErictheKit" }, { user: "Kuga2207", amount: "1M", on: "ErictheKit" }, { user: "Alfo", amount: "1M", on: "ErictheKit" }, { user: "Facolnest", amount: "2M", on: "Ciros" } ] },
            
            // Gran Final (Ganadores Semis: JP vs Nijhitivi)
            { title: "JPTheKit vs Nijhitivi", winner: "Nijhitivi", phase: "GRAN FINAL", bets: [
                { user: "Curtidor", amount: "2M", on: "Nijhitivi" }, { user: "WhodouVoodoo", amount: "2M", on: "JPTheKit" }, { user: "Alfo", amount: "2M", on: "Nijhitivi" }, { user: "Kuga2207", amount: "1M", on: "JPTheKit" }, { user: "Eric_LOM", amount: "3M", on: "JPTheKit" }, { user: "Zripht", amount: "5M", on: "JPTheKit" }, { user: "Perdi1412", amount: "1M", on: "Nijhitivi" }, { user: "Ladislao", amount: "2M", on: "JPTheKit" }, { user: "Facolnest", amount: "2M", on: "JPTheKit" }, { user: "Pichon9898", amount: "10M", on: "Nijhitivi" } ] }
        ];

        // --- 2. FUNCIONES DE AYUDA (Parsing y Formato) ---
        function parseAmount(str) {
            if (!str) return 0;
            const cleanStr = str.toLowerCase().replace(/,/g, '.').replace(/\s/g, '');
            let numeric = parseFloat(cleanStr);
            if (cleanStr.includes('m')) return numeric * 1000000;
            if (cleanStr.includes('k')) return numeric * 1000;
            return numeric;
        }

        const formatter = new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR', maximumFractionDigits: 0 });

        function formatShort(num) {
            if (Math.abs(num) >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (Math.abs(num) >= 1000) return (num / 1000).toFixed(0) + 'k';
            return num.toString();
        }

        function normalizeUser(name) {
            const lower = name.toLowerCase().trim();
            if(lower === "jpthekit" || lower === "jpdakit") return "JPTheKit";
            return name; 
        }

        // --- 3. LOGICA DE C츼LCULO ---
        const userBalances = {};
        rawFights.forEach(f => f.bets.forEach(b => {
            const user = normalizeUser(b.user);
            if (!userBalances[user]) userBalances[user] = 0;
        }));

        const fightsProcessed = rawFights.map((fight, index) => {
            let pot = 0;
            let totalWinningBets = 0;
            const winners = [];
            const losers = [];

            fight.bets.forEach(bet => {
                const amount = parseAmount(bet.amount);
                let betOn = bet.on;
                // Normalizaci칩n Ad-hoc para coincidir con winners del chat
                if(bet.on.toLowerCase().includes("eric")) betOn = "EricTheKit";
                if(bet.on.toLowerCase().includes("pichon")) betOn = "Pichon";
                if(bet.on.toLowerCase() === "ubu") betOn = "Ububu";
                if(bet.on.toLowerCase().includes("ladis")) betOn = "Ladislao";
                if(bet.on.toLowerCase().includes("zri")) betOn = "Zripht";
                if(bet.on.toLowerCase().includes("ciro")) betOn = "Ciros";
                if(bet.on.toLowerCase().includes("ibm")) betOn = "IBM";
                if(bet.on.toLowerCase().includes("whodo")) betOn = "Whodo";
                if(bet.on.toLowerCase().includes("nij") || bet.on.toLowerCase().includes("tivi")) betOn = "Nijhitivi";
                if(bet.on.toLowerCase().includes("jp")) betOn = "JPTheKit";
                
                let actualWinner = fight.winner;
                if(fight.winner === "Ciro") actualWinner = "Ciros"; 
                if(fight.winner === "EricTheKit") actualWinner = "EricTheKit";

                const isWinner = betOn.toLowerCase().includes(fight.winner.toLowerCase()) || 
                                 (fight.winner === "Ciro" && betOn.toLowerCase().includes("ciro")) ||
                                 (fight.winner === "Ciros" && betOn.toLowerCase().includes("ciro")) ||
                                 (fight.winner === "Nijhitivi" && (betOn.toLowerCase().includes("nij") || betOn.toLowerCase().includes("tivi"))) ||
                                 (fight.winner === "EricTheKit" && betOn.toLowerCase().includes("eric"));

                if (isWinner) {
                    totalWinningBets += amount;
                    winners.push({ ...bet, numericAmount: amount, normalizedUser: normalizeUser(bet.user) });
                } else {
                    pot += amount;
                    losers.push({ ...bet, numericAmount: amount, normalizedUser: normalizeUser(bet.user) });
                }
            });

            losers.forEach(l => { userBalances[l.normalizedUser] -= l.numericAmount; });
            const results = losers.map(l => ({ user: l.normalizedUser, type: 'loss', amount: -l.numericAmount }));

            winners.forEach(w => {
                let profit = 0;
                if (totalWinningBets > 0) {
                    const share = w.numericAmount / totalWinningBets;
                    profit = pot * share;
                }
                userBalances[w.normalizedUser] += profit;
                results.push({ user: w.normalizedUser, type: 'win', amount: profit, betAmount: w.numericAmount });
            });

            return { ...fight, pot, totalWinningBets, results: results.sort((a, b) => b.amount - a.amount), id: index };
        });

        // --- 4. RENDERIZADO ---

        // Render Leaderboard
        const leaderboardContainer = document.getElementById('leaderboard');
        const sortedUsers = Object.entries(userBalances).sort(([,a], [,b]) => b - a);

        sortedUsers.forEach(([user, balance], index) => {
            const div = document.createElement('div');
            const rank = index + 1;
            let rankClass = "bg-slate-700/50 text-slate-400";
            let icon = "";
            let rowClass = "border-slate-700 hover:bg-slate-800";
            
            if (rank === 1) { rankClass = "bg-amber-500 text-amber-900 shadow-[0_0_10px_rgba(245,158,11,0.5)]"; icon = "游녬"; rowClass = "border-amber-500/30 bg-amber-500/10 hover:bg-amber-500/20"; }
            if (rank === 2) { rankClass = "bg-slate-300 text-slate-900"; icon = "游볟"; }
            if (rank === 3) { rankClass = "bg-orange-700 text-orange-200"; icon = "游볠"; }

            const balanceClass = balance >= 0 ? "text-emerald-400" : "text-rose-400";
            const formattedBalance = formatter.format(balance);

            div.className = `flex items-center justify-between p-3 rounded-lg transition border ${rowClass} mb-2`;
            div.innerHTML = `
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 flex items-center justify-center rounded-sm font-black sc-font ${rankClass}">
                        ${rank}
                    </div>
                    <span class="font-bold tracking-wide">${icon} ${user}</span>
                </div>
                <div class="text-right">
                    <div class="${balanceClass} font-mono font-bold text-lg drop-shadow-md">${formattedBalance}</div>
                </div>
            `;
            leaderboardContainer.appendChild(div);
        });

        // --- RENDER BRACKET (TORNEO) ---
        const bracketView = document.getElementById('bracket-view');
        
        // Helper para crear tarjetas mini del bracket
        function createBracketCard(fightIdx) {
            if (fightIdx === undefined) return '<div class="h-24"></div>'; // Spacer
            const f = fightsProcessed[fightIdx];
            return `
                <div class="sc-card rounded p-3 mb-4 relative overflow-hidden group border border-slate-700 hover:border-cyan-400">
                    <div class="absolute top-0 right-0 p-1">
                        <span class="text-[10px] uppercase text-slate-500 font-bold bg-slate-900 px-1 rounded">${f.phase}</span>
                    </div>
                    <div class="text-xs text-slate-400 mt-2 mb-1">Combate #${f.id + 1}</div>
                    <div class="font-bold text-sm text-white truncate">${f.title}</div>
                    <div class="mt-2 flex justify-between items-end border-t border-slate-700 pt-2">
                        <span class="text-[10px] text-slate-500">Ganador</span>
                        <span class="text-cyan-400 font-bold text-sm glow">${f.winner}</span>
                    </div>
                </div>
            `;
        }

        // Estructura visual por columnas (Col 1: Prelims, Col 2: Cuartos, Col 3: Semis, Col 4: Finales)
        // Indices basados en rawFights ordenado
        const col1 = [0, 1, 2, 3, 4, 5, 6].map(i => createBracketCard(i)).join('');
        const col2 = [7, 8, 9, 10].map(i => createBracketCard(i)).join('');
        const col3 = [11, 12].map(i => `<div class="mt-8">${createBracketCard(i)}</div>`).join(''); // Spacing manual
        const col4 = [
            createBracketCard(14), // Final
            `<div class="mt-12 opacity-75 scale-90 border-t-2 border-dashed border-slate-600 pt-4"><div class="text-center text-xs text-slate-500 uppercase mb-2">3er Puesto</div>${createBracketCard(13)}</div>` // 3er puesto
        ].join('');

        bracketView.innerHTML = `
            <div class="flex flex-col justify-around gap-2">${col1}</div>
            <div class="flex flex-col justify-center gap-6">${col2}</div>
            <div class="flex flex-col justify-center gap-12">${col3}</div>
            <div class="flex flex-col justify-center gap-4">${col4}</div>
        `;


        // --- RENDER LISTA DE PELEAS ---
        const fightsContainer = document.getElementById('fights-container');
        
        fightsProcessed.forEach((fight, idx) => {
            const card = document.createElement('div');
            card.className = "sc-card rounded-xl p-5 border border-slate-800";
            
            // Filas de tabla
            let tableRows = fight.results.map(r => {
                const colorClass = r.type === 'win' ? 'text-emerald-400' : 'text-rose-400';
                const sign = r.type === 'win' ? '+' : '';
                const bgRow = r.type === 'win' ? 'bg-emerald-500/5' : 'bg-rose-500/5';
                const detail = r.type === 'win' 
                    ? `<span class="text-[10px] text-slate-500 bg-slate-900 px-1 rounded border border-slate-700">${formatShort(r.betAmount)}</span>` 
                    : ``;

                return `
                    <tr class="border-b border-slate-700/30 ${bgRow} hover:bg-slate-700/20">
                        <td class="py-1 px-2 font-medium text-sm text-slate-300">${r.user}</td>
                        <td class="py-1 px-2 text-right ${colorClass} font-mono text-sm tracking-tighter">
                            ${sign}${formatShort(r.amount)}
                        </td>
                        <td class="py-1 px-2 text-right">${detail}</td>
                    </tr>
                `;
            }).join('');

            card.innerHTML = `
                <div class="flex justify-between items-start mb-3 border-b border-slate-700/50 pb-3">
                    <div>
                        <span class="text-cyan-600 text-[10px] font-bold uppercase tracking-widest bg-cyan-900/10 px-2 py-0.5 rounded border border-cyan-900/30">${fight.phase}</span>
                        <h3 class="text-lg font-bold text-white mt-1 leading-tight">${fight.title}</h3>
                    </div>
                    <div class="text-right">
                        <div class="text-[10px] text-slate-500 uppercase">Ganador</div>
                        <div class="text-lg font-bold text-amber-400 drop-shadow-[0_0_5px_rgba(245,158,11,0.5)]">${fight.winner}</div>
                    </div>
                </div>
                
                <div class="mb-3 flex gap-2 text-xs">
                    <div class="bg-slate-900 px-2 py-1 rounded border border-slate-700 flex-1 text-center">
                        <div class="text-slate-500 text-[10px] uppercase">Bote</div>
                        <div class="text-white font-mono">${formatShort(fight.pot)}</div>
                    </div>
                    <div class="bg-slate-900 px-2 py-1 rounded border border-slate-700 flex-1 text-center">
                        <div class="text-slate-500 text-[10px] uppercase">Ganadores</div>
                        <div class="text-white font-mono">${formatShort(fight.totalWinningBets)}</div>
                    </div>
                </div>

                <div class="overflow-hidden rounded border border-slate-800/50">
                    <table class="w-full text-xs">
                        <tbody class="divide-y divide-slate-800">
                            ${tableRows}
                        </tbody>
                    </table>
                </div>
            `;
            fightsContainer.appendChild(card);
        });

    </script>
</body>
</html>
